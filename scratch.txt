`ADD: begin
  if(SRC < 2) begin //src is a register
    ACC <= ACC + regVals[SRC];
    PCNEXT <= PC + 1;
  end
  else if(SRC < 6) begin//src is a port
    if(portsHaveData[SRC]) begin //port has data
      ACC <= ACC + regVals[SRC];
      PCNEXT <= PC + 1;
      readAckOut[SRC] <= 1;
      last <= SRC;
    end
    else begin //port has no data
      mode <= `READ_MODE;
      PCNEXT <= PC;
      weWantData[SRC] <= 1;
      readTarget <= SRC;
      last <= SRC;
    end
  end
  else if(SRC == `LAST_ADDR) begin//port is last
    if(last == `NIL_ADDR) begin//last is undefined
      ACC <= ACC + regVals[last];
      PCNEXT <= PC + 1;
    end
    else if(portsHaveData[last]) begin//last has data
      ACC <= ACC + regVals[last];
      PCNEXT <= PC + 1;
      readAckOut[last] <= 1;
    end
    else
      mode <= `READ_MODE;
      PCNEXT <= PC;
      weWantData[last] M- 1;
      readTarget <= last;
    end
  end
  else if(SRC == `ANY_ADDR) begin//port is any
  end



  case(INST)
    `ADD: begin
    end
    end
    `SUB: begin
      //src could be port
    end
    `JRO: begin
      //src could be port
    end
    `MOV: begin
      //src or dst could be port
    end
    `ADDI: begin
      ACC <= ACC + IMM;
      PCNEXT <= PC + 1;
    end
    `SUBI: begin
      ACC <= ACC - IMM;
      PCNEXT <= PC + 1;
    end
    `JROI: begin
      PCNEXT <= PC + IMM;
      PCNEXT <= PC + 1;
    end
    `MOVI: begin
    //dst could port
    end
    `SWP: begin
      ACC <= BAK;
      BAK <= ACC;
      PCNEXT <= PC + 1;
    end
    `SAV: begin
      BAK <= ACC;
      PCNEXT <= PC + 1;
    end
    `NEG: begin
      ACC <= -ACC;
      PCNEXT <= PC + 1;
    end
    `JMP: begin
      PCNEXT <= LABEL;
    end
    `JEZ: begin
      if(ACC == 0) PCNEXT <= LABEL
      else         PCNEXT <= PC+1
    end
    `JNZ: begin
      if(ACC != 0) PCNEXT <= LABEL
      else         PCNEXT <= PC+1
    end
    `JGZ: begin
      if(ACC > 0)  PCNEXT <= LABEL
      else         PCNEXT <= PC+1
    end
    `JLZ: begin
      if(ACC < 0)  PCNEXT <= LABEL
      else         PCNEXT <= PC+1
    end
  endcase`
